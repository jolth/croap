
SELECT placa AS LincesePlate, g.name AS AVL, imei AS Serial, lpg.fecha AS datetime, lpg.velocidad AS Velocity, lpg.odometer, lpg.position,
lpg.altura AS altitude, lpg.grados AS Course, lpg.ubicacion AS address, te.codigo AS CodeEvent, te.descrip AS CodeEventMessage, vs.motor AS Ignition
FROM vehiculos AS v
LEFT JOIN gps AS g ON (v.gps_id = g.id)
LEFT JOIN last_positions_gps AS lpg ON (g.id = lpg.gps_id)
LEFT JOIN eventos AS e ON (lpg.id = e.positions_gps_id)
LEFT JOIN type_event AS te ON (e.type = te.codigo)
LEFT JOIN vehicle_state AS vs ON (v.id = vs.vehicle_id)
WHERE placa=lower('VZI171');

 linceseplate |  avl   | serial |        datetime        | velocity |  odometer  |            position            | altitude | course |                                     address                                     | codeevent |    codeeventmessage     | ignition
--------------+--------+--------+------------------------+----------+------------+--------------------------------+----------+--------+---------------------------------------------------------------------------------+-----------+-------------------------+----------
 vzi171       | SKP182 |        | 2021-05-28 20:47:12-05 |        0 | 28,099.939 | (5.04039466667,-75.4875013333) |          |      0 | 50, La Florida, Villamaría, Centrosur, Caldas, Región Andina, 17003, Colombia |         1 | Se ha enviado un panico | f


 linceseplate |  avl   | serial |        datetime        | velocity |  odometer   |            position            | altitude | course |                                  address                                  | codeevent | codeeventmessage | ignition
--------------+--------+--------+------------------------+----------+-------------+--------------------------------+----------+--------+---------------------------------------------------------------------------+-----------+------------------+----------
 vzi171       | SKP182 |        | 2021-05-28 20:53:05-05 |       23 | 176,673.076 | (5.45184566667,-75.6557743333) |          |  86.99 | A Supia, Guamal, Supía, Alto Occidente, Caldas, Región Andina, Colombia |           |                  | t



 linceseplate |  avl   |     serial      |        datetime        | velocity |  odometer   |            position            | altitude | course |                                  address                                  | codeevent | codeeventmessage | ignition
--------------+--------+-----------------+------------------------+----------+-------------+--------------------------------+----------+--------+---------------------------------------------------------------------------+-----------+------------------+----------
 vzi171       | SKP182 | 862894021482032 | 2021-05-28 20:53:05-05 |       23 | 176,673.076 | (5.45184566667,-75.6557743333) |          |  86.99 | A Supia, Guamal, Supía, Alto Occidente, Caldas, Región Andina, Colombia |           |                  | t



SELECT *
FROM vehicle_soap AS vs
LEFT JOIN soap_server AS ss ON (ss.id=vs.soap_server)
WHERE ss.name = 'controlt';

 id | vehicle_id | gps_id | last_position_gps_id |         created_on         | soap_server | last_delivery | id |   name
----+------------+--------+----------------------+----------------------------+-------------+---------------+----+----------
  1 |        275 |    335 |            170716059 | 2021-05-28 20:34:43.051281 |           1 |               |  1 | controlt
(1 row)




SELECT *
FROM vehicle_soap AS vs
LEFT JOIN last_positions_gps AS lsp ON (lsp.gps_id=vs.gps_id)
WHERE vs.last_position_gps_id=lsp.id;
